(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["subapp-login-app"]=t():e["subapp-login-app"]=t()})(window,(function(){return function(e){function t(t){for(var o,s,i=t[0],l=t[1],c=t[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],o=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(o=!1)}o&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},n={app:0},a=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp_subapp-login"]=window["webpackJsonp_subapp-login"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;return a.push([0,"chunk-vendors"]),r()}({0:function(e,t,r){e.exports=r("cd49")},"052f":function(e,t,r){},"24f6":function(e,t,r){},"2b48":function(e,t,r){window.__POWERED_BY_QIANKUN__&&(r.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},"34c4":function(e,t,r){},"38d6":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return WebSoketAPI}));var core_js_modules_web_self_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("c73d"),core_js_modules_web_self_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_self_js__WEBPACK_IMPORTED_MODULE_0__),_api_platform_config__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("38e1"),_utils_js_aes_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("58e9"),_utils_js_bus__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("4756");class WebSoketAPI{static initWebsoket(vo){let websock=new WebSocket(this.onlineWsUrl.replace("{loginInfo}",_utils_js_aes_utils__WEBPACK_IMPORTED_MODULE_2__["a"].encryptByKey(JSON.stringify(vo),"gisq65418c9fe068")));return WebSoketAPI.websocket=websock,websock.onmessage=function(e){let data=e.data;try{var obj=eval("("+data+")");if(null!==obj&&void 0!==obj&&obj.tokenLost){console.log(window,window.top,window.top&&window.top!=window.self);let e=window.location.href;if(window.top&&window.top!=window.self&&e.indexOf("/bi/")<0)return;if(e.indexOf("/bi/")<0&&e.indexOf("/login")<0&&e.indexOf("/iframe/loginform")<0)localStorage.beforeUserId=null===obj||void 0===obj?void 0:obj.userId,websock.close(),_utils_js_bus__WEBPACK_IMPORTED_MODULE_3__["a"].$emit("showLoginForm",{isDialog:!0});else if(e.indexOf("/bi/")>-1){const e={isDialog:!0,subGuid:null===obj||void 0===obj?void 0:obj.subGuid};_utils_js_bus__WEBPACK_IMPORTED_MODULE_3__["a"].$emit("showBiLoginpageUrl",e)}let t=null===obj||void 0===obj?void 0:obj.subGuid;if(void 0==t||null==t||""==t){localStorage.setItem("tokenLost","true");let e=null===obj||void 0===obj?void 0:obj.telephone,t=null===obj||void 0===obj?void 0:obj.telephoneTm;e&&void 0!=e&&null!=e&&(localStorage.setItem("beforeTelephone",e),localStorage.setItem("beforeTelephoneTm",t))}else{let e=localStorage.getItem("appObject");if(e){let r=JSON.parse(e),o=r[t];(o instanceof String||"string"===typeof o)&&(o=JSON.parse(r[t])),o["tokenLost"]=!0;let n=null===obj||void 0===obj?void 0:obj.telephone,a=null===obj||void 0===obj?void 0:obj.telephoneTm;n&&void 0!=n&&null!=n&&(o["beforeTelephone"]=n,o["beforeTelephoneTm"]=a),r[t]=o,localStorage.setItem("appObject",JSON.stringify(r))}}}}catch(e){}},websock.onopen=function(){"reload"!=vo.reload&&this.send("login"),console.log("连接")},websock.onerror=function(){console.log("错误")},websock.onclose=function(e){console.log("退出")},websock}}WebSoketAPI.onlineWsUrl=_api_platform_config__WEBPACK_IMPORTED_MODULE_1__["a"].webSocketPath+"websocket/{loginInfo}"},"38e1":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));const o={platform:"/platform/",activiti:"/activiti/",bizmodel:"/bizmodel/",identity:"/identity/",identity2:"/identity2/",base:"/base/",external:"/external",gisqBI:"/gisqBI/api/",gisqForm:"/gisqForm/api/",auth:"/auth/",share:"/share/",rule:"/rule/",eureka:"/eureka/",subIds:["aa4ab92a-6f4d-11ea-a207-52e55c6d7a2c"],message:"/message",code:"/code/",title:"臻善应用快速构建平台",gisqBIEditor:"/gisqBI/",documentPath:"/resource/",ruleOrShareEditor:"/ruleOrShareEditor/",webSocketPath:"ws://192.168.100.4:19004/",expInfoWebSocket:"ws://192.168.100.4:19001/websocket/",expDownloadPath:"/expDownload/",gisqFormWeb:"/gisqForm/",routePath:"",innerCode:!1,diviceId:"465165",mainPage:"/startPage",isNew:!0,webAppLink:"/gisqMMP/",useForm:!0,showFilebagOrForm:!0,timestampToken:!1,defaultTheme:"light",helpCenterUrl:"/resource/docs/",enableSync:!1,zipKinRequestUrl:"/zipkin/api/v2/trace/",zzdAppCode:"",isLocalStorageSubGuidFilter:!0,GISPlatform:"/gisqGIS/",GISPlatformApi:"/gisqGIS/api",gisEnable:!0};t["b"]=o},4678:function(e,t,r){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id="4678"},4756:function(e,t,r){"use strict";var o=r("2b0e");const n=new o["default"];t["a"]=n},4824:function(e,t,r){},5808:function(e,t,r){(function(e,o){var n,a;r("c73d"),r("14d9"),r("13d5"),r("f4dd"),r("71b4"),r("d9e2"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},s=r._,i=Array.prototype,l=Object.prototype,c="undefined"!==typeof Symbol?Symbol.prototype:null,u=i.push,d=i.slice,f=l.toString,p=l.hasOwnProperty,m=Array.isArray,g=Object.keys,h=Object.create,b=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};t.nodeType?r._=w:(!o.nodeType&&o.exports&&(t=o.exports=w),t._=w),w.VERSION="1.9.1";var y,v=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,o,n){return e.call(t,r,o,n)};case 4:return function(r,o,n,a){return e.call(t,r,o,n,a)}}return function(){return e.apply(t,arguments)}},_=function(e,t,r){return w.iteratee!==y?w.iteratee(e,t):null==e?w.identity:w.isFunction(e)?v(e,t,r):w.isObject(e)&&!w.isArray(e)?w.matcher(e):w.property(e)};w.iteratee=y=function(e,t){return _(e,t,1/0)};var k=function(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),o=Array(r),n=0;n<r;n++)o[n]=arguments[n+t];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,arguments[0],o);case 2:return e.call(this,arguments[0],arguments[1],o)}var a=Array(t+1);for(n=0;n<t;n++)a[n]=arguments[n];return a[t]=o,e.apply(this,a)}},S=function(e){if(!w.isObject(e))return{};if(h)return h(e);b.prototype=e;var t=new b;return b.prototype=null,t},j=function(e){return function(t){return null==t?void 0:t[e]}},O=function(e,t){return null!=e&&p.call(e,t)},I=function(e,t){for(var r=t.length,o=0;o<r;o++){if(null==e)return;e=e[t[o]]}return r?e:void 0},x=Math.pow(2,53)-1,T=j("length"),C=function(e){var t=T(e);return"number"==typeof t&&t>=0&&t<=x};w.each=w.forEach=function(e,t,r){var o,n;if(t=v(t,r),C(e))for(o=0,n=e.length;o<n;o++)t(e[o],o,e);else{var a=w.keys(e);for(o=0,n=a.length;o<n;o++)t(e[a[o]],a[o],e)}return e},w.map=w.collect=function(e,t,r){t=_(t,r);for(var o=!C(e)&&w.keys(e),n=(o||e).length,a=Array(n),s=0;s<n;s++){var i=o?o[s]:s;a[s]=t(e[i],i,e)}return a};var M=function(e){var t=function(t,r,o,n){var a=!C(t)&&w.keys(t),s=(a||t).length,i=e>0?0:s-1;for(n||(o=t[a?a[i]:i],i+=e);i>=0&&i<s;i+=e){var l=a?a[i]:i;o=r(o,t[l],l,t)}return o};return function(e,r,o,n){var a=arguments.length>=3;return t(e,v(r,n,4),o,a)}};w.reduce=w.foldl=w.inject=M(1),w.reduceRight=w.foldr=M(-1),w.find=w.detect=function(e,t,r){var o=C(e)?w.findIndex:w.findKey,n=o(e,t,r);if(void 0!==n&&-1!==n)return e[n]},w.filter=w.select=function(e,t,r){var o=[];return t=_(t,r),w.each(e,(function(e,r,n){t(e,r,n)&&o.push(e)})),o},w.reject=function(e,t,r){return w.filter(e,w.negate(_(t)),r)},w.every=w.all=function(e,t,r){t=_(t,r);for(var o=!C(e)&&w.keys(e),n=(o||e).length,a=0;a<n;a++){var s=o?o[a]:a;if(!t(e[s],s,e))return!1}return!0},w.some=w.any=function(e,t,r){t=_(t,r);for(var o=!C(e)&&w.keys(e),n=(o||e).length,a=0;a<n;a++){var s=o?o[a]:a;if(t(e[s],s,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,r,o){return C(e)||(e=w.values(e)),("number"!=typeof r||o)&&(r=0),w.indexOf(e,t,r)>=0},w.invoke=k((function(e,t,r){var o,n;return w.isFunction(t)?n=t:w.isArray(t)&&(o=t.slice(0,-1),t=t[t.length-1]),w.map(e,(function(e){var a=n;if(!a){if(o&&o.length&&(e=I(e,o)),null==e)return;a=e[t]}return null==a?a:a.apply(e,r)}))})),w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,r){var o,n,a=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=C(e)?e:w.values(e);for(var i=0,l=e.length;i<l;i++)o=e[i],null!=o&&o>a&&(a=o)}else t=_(t,r),w.each(e,(function(e,r,o){n=t(e,r,o),(n>s||n===-1/0&&a===-1/0)&&(a=e,s=n)}));return a},w.min=function(e,t,r){var o,n,a=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=C(e)?e:w.values(e);for(var i=0,l=e.length;i<l;i++)o=e[i],null!=o&&o<a&&(a=o)}else t=_(t,r),w.each(e,(function(e,r,o){n=t(e,r,o),(n<s||n===1/0&&a===1/0)&&(a=e,s=n)}));return a},w.shuffle=function(e){return w.sample(e,1/0)},w.sample=function(e,t,r){if(null==t||r)return C(e)||(e=w.values(e)),e[w.random(e.length-1)];var o=C(e)?w.clone(e):w.values(e),n=T(o);t=Math.max(Math.min(t,n),0);for(var a=n-1,s=0;s<t;s++){var i=w.random(s,a),l=o[s];o[s]=o[i],o[i]=l}return o.slice(0,t)},w.sortBy=function(e,t,r){var o=0;return t=_(t,r),w.pluck(w.map(e,(function(e,r,n){return{value:e,index:o++,criteria:t(e,r,n)}})).sort((function(e,t){var r=e.criteria,o=t.criteria;if(r!==o){if(r>o||void 0===r)return 1;if(r<o||void 0===o)return-1}return e.index-t.index})),"value")};var L=function(e,t){return function(r,o,n){var a=t?[[],[]]:{};return o=_(o,n),w.each(r,(function(t,n){var s=o(t,n,r);e(a,t,s)})),a}};w.groupBy=L((function(e,t,r){O(e,r)?e[r].push(t):e[r]=[t]})),w.indexBy=L((function(e,t,r){e[r]=t})),w.countBy=L((function(e,t,r){O(e,r)?e[r]++:e[r]=1}));var D=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;w.toArray=function(e){return e?w.isArray(e)?d.call(e):w.isString(e)?e.match(D):C(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:C(e)?e.length:w.keys(e).length},w.partition=L((function(e,t,r){e[r?0:1].push(t)}),!0),w.first=w.head=w.take=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,r){return d.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},w.last=function(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,r){return d.call(e,null==t||r?1:t)},w.compact=function(e){return w.filter(e,Boolean)};var E=function(e,t,r,o){o=o||[];for(var n=o.length,a=0,s=T(e);a<s;a++){var i=e[a];if(C(i)&&(w.isArray(i)||w.isArguments(i)))if(t){var l=0,c=i.length;while(l<c)o[n++]=i[l++]}else E(i,t,r,o),n=o.length;else r||(o[n++]=i)}return o};w.flatten=function(e,t){return E(e,t,!1)},w.without=k((function(e,t){return w.difference(e,t)})),w.uniq=w.unique=function(e,t,r,o){w.isBoolean(t)||(o=r,r=t,t=!1),null!=r&&(r=_(r,o));for(var n=[],a=[],s=0,i=T(e);s<i;s++){var l=e[s],c=r?r(l,s,e):l;t&&!r?(s&&a===c||n.push(l),a=c):r?w.contains(a,c)||(a.push(c),n.push(l)):w.contains(n,l)||n.push(l)}return n},w.union=k((function(e){return w.uniq(E(e,!0,!0))})),w.intersection=function(e){for(var t=[],r=arguments.length,o=0,n=T(e);o<n;o++){var a=e[o];if(!w.contains(t,a)){var s;for(s=1;s<r;s++)if(!w.contains(arguments[s],a))break;s===r&&t.push(a)}}return t},w.difference=k((function(e,t){return t=E(t,!0,!0),w.filter(e,(function(e){return!w.contains(t,e)}))})),w.unzip=function(e){for(var t=e&&w.max(e,T).length||0,r=Array(t),o=0;o<t;o++)r[o]=w.pluck(e,o);return r},w.zip=k(w.unzip),w.object=function(e,t){for(var r={},o=0,n=T(e);o<n;o++)t?r[e[o]]=t[o]:r[e[o][0]]=e[o][1];return r};var P=function(e){return function(t,r,o){r=_(r,o);for(var n=T(t),a=e>0?0:n-1;a>=0&&a<n;a+=e)if(r(t[a],a,t))return a;return-1}};w.findIndex=P(1),w.findLastIndex=P(-1),w.sortedIndex=function(e,t,r,o){r=_(r,o,1);var n=r(t),a=0,s=T(e);while(a<s){var i=Math.floor((a+s)/2);r(e[i])<n?a=i+1:s=i}return a};var A=function(e,t,r){return function(o,n,a){var s=0,i=T(o);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+i,s):i=a>=0?Math.min(a+1,i):a+i+1;else if(r&&a&&i)return a=r(o,n),o[a]===n?a:-1;if(n!==n)return a=t(d.call(o,s,i),w.isNaN),a>=0?a+s:-1;for(a=e>0?s:i-1;a>=0&&a<i;a+=e)if(o[a]===n)return a;return-1}};w.indexOf=A(1,w.findIndex,w.sortedIndex),w.lastIndexOf=A(-1,w.findLastIndex),w.range=function(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var o=Math.max(Math.ceil((t-e)/r),0),n=Array(o),a=0;a<o;a++,e+=r)n[a]=e;return n},w.chunk=function(e,t){if(null==t||t<1)return[];var r=[],o=0,n=e.length;while(o<n)r.push(d.call(e,o,o+=t));return r};var N=function(e,t,r,o,n){if(!(o instanceof t))return e.apply(r,n);var a=S(e.prototype),s=e.apply(a,n);return w.isObject(s)?s:a};w.bind=k((function(e,t,r){if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var o=k((function(n){return N(e,o,t,this,r.concat(n))}));return o})),w.partial=k((function(e,t){var r=w.partial.placeholder,o=function(){for(var n=0,a=t.length,s=Array(a),i=0;i<a;i++)s[i]=t[i]===r?arguments[n++]:t[i];while(n<arguments.length)s.push(arguments[n++]);return N(e,o,this,this,s)};return o})),w.partial.placeholder=w,w.bindAll=k((function(e,t){t=E(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");while(r--){var o=t[r];e[o]=w.bind(e[o],e)}})),w.memoize=function(e,t){var r=function(o){var n=r.cache,a=""+(t?t.apply(this,arguments):o);return O(n,a)||(n[a]=e.apply(this,arguments)),n[a]};return r.cache={},r},w.delay=k((function(e,t,r){return setTimeout((function(){return e.apply(null,r)}),t)})),w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,r){var o,n,a,s,i=0;r||(r={});var l=function(){i=!1===r.leading?0:w.now(),o=null,s=e.apply(n,a),o||(n=a=null)},c=function(){var c=w.now();i||!1!==r.leading||(i=c);var u=t-(c-i);return n=this,a=arguments,u<=0||u>t?(o&&(clearTimeout(o),o=null),i=c,s=e.apply(n,a),o||(n=a=null)):o||!1===r.trailing||(o=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(o),i=0,o=n=a=null},c},w.debounce=function(e,t,r){var o,n,a=function(t,r){o=null,r&&(n=e.apply(t,r))},s=k((function(s){if(o&&clearTimeout(o),r){var i=!o;o=setTimeout(a,t),i&&(n=e.apply(this,s))}else o=w.delay(a,t,this,s);return n}));return s.cancel=function(){clearTimeout(o),o=null},s},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){var r=t,o=e[t].apply(this,arguments);while(r--)o=e[r].call(this,o);return o}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},w.once=w.partial(w.before,2),w.restArguments=k;var F=!{toString:null}.propertyIsEnumerable("toString"),q=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Y=function(e,t){var r=q.length,o=e.constructor,n=w.isFunction(o)&&o.prototype||l,a="constructor";O(e,a)&&!w.contains(t,a)&&t.push(a);while(r--)a=q[r],a in e&&e[a]!==n[a]&&!w.contains(t,a)&&t.push(a)};w.keys=function(e){if(!w.isObject(e))return[];if(g)return g(e);var t=[];for(var r in e)O(e,r)&&t.push(r);return F&&Y(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var r in e)t.push(r);return F&&Y(e,t),t},w.values=function(e){for(var t=w.keys(e),r=t.length,o=Array(r),n=0;n<r;n++)o[n]=e[t[n]];return o},w.mapObject=function(e,t,r){t=_(t,r);for(var o=w.keys(e),n=o.length,a={},s=0;s<n;s++){var i=o[s];a[i]=t(e[i],i,e)}return a},w.pairs=function(e){for(var t=w.keys(e),r=t.length,o=Array(r),n=0;n<r;n++)o[n]=[t[n],e[t[n]]];return o},w.invert=function(e){for(var t={},r=w.keys(e),o=0,n=r.length;o<n;o++)t[e[r[o]]]=r[o];return t},w.functions=w.methods=function(e){var t=[];for(var r in e)w.isFunction(e[r])&&t.push(r);return t.sort()};var U=function(e,t){return function(r){var o=arguments.length;if(t&&(r=Object(r)),o<2||null==r)return r;for(var n=1;n<o;n++)for(var a=arguments[n],s=e(a),i=s.length,l=0;l<i;l++){var c=s[l];t&&void 0!==r[c]||(r[c]=a[c])}return r}};w.extend=U(w.allKeys),w.extendOwn=w.assign=U(w.keys),w.findKey=function(e,t,r){t=_(t,r);for(var o,n=w.keys(e),a=0,s=n.length;a<s;a++)if(o=n[a],t(e[o],o,e))return o};var G,B,z=function(e,t,r){return t in r};w.pick=k((function(e,t){var r={},o=t[0];if(null==e)return r;w.isFunction(o)?(t.length>1&&(o=v(o,t[1])),t=w.allKeys(e)):(o=z,t=E(t,!1,!1),e=Object(e));for(var n=0,a=t.length;n<a;n++){var s=t[n],i=e[s];o(i,s,e)&&(r[s]=i)}return r})),w.omit=k((function(e,t){var r,o=t[0];return w.isFunction(o)?(o=w.negate(o),t.length>1&&(r=t[1])):(t=w.map(E(t,!1,!1),String),o=function(e,r){return!w.contains(t,r)}),w.pick(e,o,r)})),w.defaults=U(w.allKeys,!0),w.create=function(e,t){var r=S(e);return t&&w.extendOwn(r,t),r},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var r=w.keys(t),o=r.length;if(null==e)return!o;for(var n=Object(e),a=0;a<o;a++){var s=r[a];if(t[s]!==n[s]||!(s in n))return!1}return!0},G=function(e,t,r,o){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var n=typeof e;return("function"===n||"object"===n||"object"==typeof t)&&B(e,t,r,o)},B=function(e,t,r,o){e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var n=f.call(e);if(n!==f.call(t))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+e===""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t)}var a="[object Array]"===n;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,i=t.constructor;if(s!==i&&!(w.isFunction(s)&&s instanceof s&&w.isFunction(i)&&i instanceof i)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],o=o||[];var l=r.length;while(l--)if(r[l]===e)return o[l]===t;if(r.push(e),o.push(t),a){if(l=e.length,l!==t.length)return!1;while(l--)if(!G(e[l],t[l],r,o))return!1}else{var u,d=w.keys(e);if(l=d.length,w.keys(t).length!==l)return!1;while(l--)if(u=d[l],!O(t,u)||!G(e[u],t[u],r,o))return!1}return r.pop(),o.pop(),!0},w.isEqual=function(e,t){return G(e,t)},w.isEmpty=function(e){return null==e||(C(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length)},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=m||function(e){return"[object Array]"===f.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){w["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}})),w.isArguments(arguments)||(w.isArguments=function(e){return O(e,"callee")});var R=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof R&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return!w.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&isNaN(e)},w.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){if(!w.isArray(t))return O(e,t);for(var r=t.length,o=0;o<r;o++){var n=t[o];if(null==e||!p.call(e,n))return!1;e=e[n]}return!!r},w.noConflict=function(){return r._=s,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=function(e){return w.isArray(e)?function(t){return I(t,e)}:j(e)},w.propertyOf=function(e){return null==e?function(){}:function(t){return w.isArray(t)?I(e,t):e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,r){var o=Array(Math.max(0,e));t=v(t,r,1);for(var n=0;n<e;n++)o[n]=t(n);return o},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},$=w.invert(H),J=function(e){var t=function(t){return e[t]},r="(?:"+w.keys(e).join("|")+")",o=RegExp(r),n=RegExp(r,"g");return function(e){return e=null==e?"":""+e,o.test(e)?e.replace(n,t):e}};w.escape=J(H),w.unescape=J($),w.result=function(e,t,r){w.isArray(t)||(t=[t]);var o=t.length;if(!o)return w.isFunction(r)?r.call(e):r;for(var n=0;n<o;n++){var a=null==e?void 0:e[t[n]];void 0===a&&(a=r,n=o),e=w.isFunction(a)?a.call(e):a}return e};var K=0;w.uniqueId=function(e){var t=++K+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(e){return"\\"+X[e]};w.template=function(e,t,r){!t&&r&&(t=r),t=w.defaults({},t,w.templateSettings);var o,n=RegExp([(t.escape||W).source,(t.interpolate||W).source,(t.evaluate||W).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(n,(function(t,r,o,n,i){return s+=e.slice(a,i).replace(V,Q),a=i+t.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":o?s+="'+\n((__t=("+o+"))==null?'':__t)+\n'":n&&(s+="';\n"+n+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{o=new Function(t.variable||"obj","_",s)}catch(c){throw c.source=s,c}var i=function(e){return o.call(this,e,w)},l=t.variable||"obj";return i.source="function("+l+"){\n"+s+"}",i},w.chain=function(e){var t=w(e);return t._chain=!0,t};var Z=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){return w.each(w.functions(e),(function(t){var r=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Z(this,r.apply(w,e))}})),w},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=i[e];w.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],Z(this,r)}})),w.each(["concat","join","slice"],(function(e){var t=i[e];w.prototype[e]=function(){return Z(this,t.apply(this._wrapped,arguments))}})),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return String(this._wrapped)},n=[],a=function(){return w}.apply(t,n),void 0===a||(o.exports=a)}()}).call(this,r("c8ba"),r("62e4")(e))},"58e9":function(e,t,r){"use strict";var o=r("3452"),n=r.n(o);t["a"]={encrypt(e){const t=n.a.enc.Base64.stringify(n.a.enc.Utf8.parse("gisq39561c9fe068")),r=n.a.enc.Base64.parse(t),o=r,a=n.a.enc.Utf8.parse(e),s=n.a.AES.encrypt(a,r,{iv:o,mode:n.a.mode.CBC,padding:n.a.pad.Pkcs7}),i=s.ciphertext.toString().toLowerCase();return i},encryptByKey(e,t){const r=n.a.enc.Base64.stringify(n.a.enc.Utf8.parse(t)),o=n.a.enc.Base64.parse(r),a=o,s=n.a.enc.Utf8.parse(e),i=n.a.AES.encrypt(s,o,{iv:a,mode:n.a.mode.CBC,padding:n.a.pad.Pkcs7}),l=i.ciphertext.toString().toLowerCase();return l},decrypt(e){const t=crypto.enc.Base64.stringify(crypto.enc.Utf8.parse("gisq39561c9fe068")),r=crypto.enc.Base64.parse(t),o=r,n=crypto.AES.decrypt(e,r,{iv:o,mode:crypto.mode.CBC,padding:crypto.pad.Pkcs7});return n.toString(crypto.enc.Utf8)}}},"6c9a":function(e,t,r){"use strict";r.r(t),t["default"]={namespaced:!0,state:{msg:""},mutations:{SET_MSG_VALUE(e,t){e.msg=t}},actions:{setMsg({commit:e},t){e("SET_MSG_VALUE",t)}}}},"863e":function(e,t){},"8d63":function(e,t,r){"use strict";r("052f")},a6cf:function(e,t,r){"use strict";r("24f6")},c653:function(e,t,r){var o={"./appstore.js":"6c9a"};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}n.keys=function(){return Object.keys(o)},n.resolve=a,e.exports=n,n.id="c653"},cd49:function(e,t,r){"use strict";r.r(t),r.d(t,"bootstrap",(function(){return rt})),r.d(t,"mount",(function(){return ot})),r.d(t,"unmount",(function(){return nt}));r("2b48");var o=r("2b0e"),n=r("8c4f"),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},s=[],i={name:"App"},l=i,c=(r("f80a"),r("2877")),u=Object(c["a"])(l,a,s,!1,null,null,null),d=u.exports,f=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"login-page"},[t("video",{staticClass:"bg_video",attrs:{src:r("e34b"),autoplay:"",loop:"",muted:""},domProps:{muted:!0}}),t("ul",{staticClass:"logoaAndTitle"},[e.flag?t("li",[t("img",{attrs:{src:e.logoUrl,alt:""}}),t("p",[e._v(e._s(e.platformTitle))])]):e._e()]),e.flag?t("div",[t("loginForm"),t("FtInput")],1):e._e()])},p=[],m=r("9ab4"),g=r("2fe1"),h={},b=!1,w={watermark_id:"wm_div_id",watermark_prefix:"mask_div_id",watermark_txt:"",watermark_x:20,watermark_y:20,watermark_rows:0,watermark_cols:0,watermark_x_space:50,watermark_y_space:50,watermark_font:"微软雅黑",watermark_color:"black",watermark_fontsize:"16px",watermark_alpha:.15,watermark_width:100,watermark_height:100,watermark_angle:15,watermark_parent_width:0,watermark_parent_height:0,watermark_parent_node:"platformApp",monitor:!0};const y=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;var v,_=function(e){b?b=!1:(v&&1===e.length||1===e.length&&e[0].removedNodes.length>=1)&&O(v)},k=void 0!==y,S=k?new y(_):null,j={childList:!0,attributes:!0,subtree:!0},O=function(e){if(1===arguments.length&&"object"===typeof arguments[0]){var t=arguments[0]||{};for(const e in t)t[e]&&w[e]&&t[e]===w[e]||(t[e]||0===t[e])&&(w[e]=t[e])}var r=document.getElementById(w.watermark_id);r&&r.parentNode&&r.parentNode.removeChild(r);var o=document.getElementById(w.watermark_parent_node),n=o||null;if(!n)return!1;var a=Math.max(n.scrollWidth,n.clientWidth),s=Math.max(n.scrollHeight,n.clientHeight),i=arguments[0]||{},l=n,c=0,u=0;i.watermark_parent_width||i.watermark_parent_height?l&&(c=l.offsetTop||0,u=l.offsetLeft||0,w.watermark_x=w.watermark_x+u,w.watermark_y=w.watermark_y+c):l&&(c=l.offsetTop||0,u=l.offsetLeft||0);var d=document.getElementById(w.watermark_id),f=null;if(d)d.shadowRoot&&(f=d.shadowRoot);else{d=document.createElement("div"),d.id=w.watermark_id,d.setAttribute("style","pointer-events: none !important; display: block !important"),f="function"===typeof d.attachShadow?d.attachShadow({mode:"open"}):d;var p=n.children,m=Math.floor(Math.random()*(p.length-1));p[m]?n.insertBefore(d,p[m]):n.appendChild(d)}w.watermark_cols=parseInt((a-w.watermark_x)/(w.watermark_width+w.watermark_x_space));var g,h=parseInt((a-w.watermark_x-w.watermark_width*w.watermark_cols)/w.watermark_cols);w.watermark_x_space=h?w.watermark_x_space:h,w.watermark_rows=parseInt((s-w.watermark_y)/(w.watermark_height+w.watermark_y_space));var b,y,v,_=parseInt((s-w.watermark_y-w.watermark_height*w.watermark_rows)/w.watermark_rows);w.watermark_y_space=_?w.watermark_y_space:_,o?(g=w.watermark_x+w.watermark_width*w.watermark_cols+w.watermark_x_space*(w.watermark_cols-1),b=w.watermark_y+w.watermark_height*w.watermark_rows+w.watermark_y_space*(w.watermark_rows-1)):(g=u+w.watermark_x+w.watermark_width*w.watermark_cols+w.watermark_x_space*(w.watermark_cols-1),b=c+w.watermark_y+w.watermark_height*w.watermark_rows+w.watermark_y_space*(w.watermark_rows-1));for(var O=0;O<w.watermark_rows;O++){v=o?c+w.watermark_y+(s-b)/2+(w.watermark_y_space+w.watermark_height)*O:w.watermark_y+(s-b)/2+(w.watermark_y_space+w.watermark_height)*O;for(var I=0;I<w.watermark_cols;I++){y=o?u+w.watermark_x+(a-g)/2+(w.watermark_width+w.watermark_x_space)*I:w.watermark_x+(a-g)/2+(w.watermark_width+w.watermark_x_space)*I;var x=document.createElement("div"),T=document.createTextNode(w.watermark_txt);x.appendChild(T),x.style.whiteSpace="pre-wrap",x.id=w.watermark_prefix+O+I,x.style.webkitTransform="rotate(-"+w.watermark_angle+"deg)",x.style.MozTransform="rotate(-"+w.watermark_angle+"deg)",x.style.msTransform="rotate(-"+w.watermark_angle+"deg)",x.style.OTransform="rotate(-"+w.watermark_angle+"deg)",x.style.transform="rotate(-"+w.watermark_angle+"deg)",x.style.visibility="",x.style.position="absolute",x.style.left=y+"px",x.style.top=v+"px",x.style.overflow="hidden",x.style.zIndex="9999999",x.style.opacity=w.watermark_alpha,x.style.fontSize=w.watermark_fontsize,x.style.fontFamily=w.watermark_font,x.style.color=w.watermark_color,x.style.textAlign="center",x.style.width=w.watermark_width+"px",x.style.height=w.watermark_height+"px",x.style.display="block",x.style["-ms-user-select"]="none",f.appendChild(x)}}const C=void 0===e.monitor?w.monitor:e.monitor;C&&k&&(S.observe(n,j),S.observe(document.getElementById(w.watermark_id).shadowRoot,j))},I=function(){if(1===arguments.length&&"object"===typeof arguments[0]){var e=arguments[0]||{};for(key in e)e[key]&&w[key]&&e[key]===w[key]||(e[key]||0===e[key])&&(w[key]=e[key])}var t=document.getElementById(w.watermark_id),r=t.parentNode;r.removeChild(t)};h.init=function(e){v=e,O(e),window.addEventListener("onload",(function(){O(e)})),window.addEventListener("resize",(function(){O(e)}))},h.load=function(e){v=e,O(e)},h.remove=function(){b=!0,I()};var x=h,T=r("2ef0"),C=r.n(T);class M{static get loading(){return this._loading}static get exist(){return this._exist}static async loadDefault(){if(!this._loading)try{this._loading=!0,this.create("水印内容")}catch(e){}finally{this._loading=!1}}static create(e,t=!1){if(this.shouldRemove)return this.shouldRemove=!1,void(this._exist=!1);this.exist&&!t||(x.load({watermark_txt:e,watermark_x_space:100,watermark_y_space:80,watermark_alpha:.1,watermark_width:200,monitor:!1,watermark_height:150}),window.addEventListener("resize",this.onReSize),this._text=e,this._exist=!0)}static remove(){this.exist?(x.remove(),window.removeEventListener("resize",this.onReSize),this._text="",this._exist=!1):this.loading&&(this.shouldRemove=!0)}}M._exist=!1,M._loading=!1,M._text="",M.shouldRemove=!1,M.onReSize=C.a.throttle(()=>{if(M._exist){const e=M._text;x.remove(),x.load({watermark_txt:e,watermark_x_space:100,watermark_y_space:80,watermark_alpha:.1,watermark_width:200,monitor:!1,watermark_height:150})}},1e3);var L=r("bc3a"),D=r.n(L),E=r("38e1");class P{static async getPlatInfo(){const e=await D.a.get(this.getPlatInfoUrl);return e.data.data}static async getCodeValuePropertysByKeys(e){const t=await D.a.post(this.getCodeValuePropertysByKeysUrl,e);return t.data.data}static async getCommonSubGuid(){const e=await D.a.get(this.getCommonSubGuidUrl);return e.data.data}}P.getPlatInfoUrl=(E["b"].isNew?E["b"].identity:E["b"].platform)+"getPlatInfo/explorer",P.getCodeValuePropertysByKeysUrl=E["b"].base+"base/sysconfig/getCodeValuePropertysByKeys",P.getCommonSubGuidUrl=E["b"].base+"base/getCommonSubGuid";var A=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"login-box"},[e.showCodeLogin&&"authentication"!=e.loginType?t("el-tabs",{staticClass:"login-type-wrap",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{name:"password"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont zwpt_mimadenglu"}),t("span",[e._v("密码登录")])]),t("el-form",{ref:"AccountForm",staticClass:"demo-ruleForm loginform",attrs:{model:e.account,rules:e.rules,"label-position":"left","label-width":"0px"}},[t("el-form-item",{attrs:{prop:"username"}},[t("i",{staticClass:"iconfont zwpt_username"}),t("el-input",{staticClass:"input_set",attrs:{type:"text",placeholder:"请输入账号",autofocus:"","auto-complete":"off",disabled:!!e.getLoginFormShow()},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1),t("el-form-item",{attrs:{prop:"pwd"}},[t("i",{staticClass:"iconfont zwpt_password-login"}),e.getLoginFormShow()?t("el-input",{ref:"password",staticClass:"input_set",attrs:{type:e.passwordType,readonly:e.readonly,"auto-complete":"confirm-password",placeholder:"请输入登录密码"},on:{focus:function(t){return e.changAttr(t,"focus")},blur:function(t){return e.changAttr(t,"blur")},input:function(t){return e.changAttr(t,"input")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)},click:function(t){return e.clickEvt.apply(null,arguments)}},model:{value:e.account.pwd,callback:function(t){e.$set(e.account,"pwd",t)},expression:"account.pwd"}}):t("el-input",{staticClass:"input_set",attrs:{type:e.passwordType,autofocus:e.pwdFocus,"auto-complete":"off",placeholder:"请输入登录密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.account.pwd,callback:function(t){e.$set(e.account,"pwd",t)},expression:"account.pwd"}}),t("i",{staticClass:"iconfont",class:e.passwordIcon,staticStyle:{cursor:"pointer"},on:{click:e.isShowPassword}})],1)],1)],1),t("el-tab-pane",{attrs:{name:"code"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"iconfont zwpt_yanzhengmadenglu"}),t("span",[e._v("验证码登录")])]),t("el-form",{ref:"codeForm",staticClass:"demo-ruleForm loginform",attrs:{model:e.codeLogin,rules:e.codeRules,"label-position":"left","label-width":"0px"}},[t("el-form-item",{attrs:{prop:"mobile"}},[t("i",{staticClass:"iconfont zwpt_shoujihao"}),t("el-input",{staticClass:"input_set",attrs:{disabled:!!e.getLoginFormShow(),type:"text",autofocus:"","auto-complete":"off",placeholder:"请输入手机号"},on:{input:e.getMobile},model:{value:e.codeLogin.mobileTm,callback:function(t){e.$set(e.codeLogin,"mobileTm",t)},expression:"codeLogin.mobileTm"}})],1),t("el-form-item",{attrs:{prop:"mobileCode"}},[t("i",{staticClass:"iconfont zwpt_shoujiyanzhengma"}),t("el-input",{staticClass:"input_set",attrs:{placeholder:"请输入短信验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.codeLogin.mobileCode,callback:function(t){e.$set(e.codeLogin,"mobileCode",t)},expression:"codeLogin.mobileCode"}}),t("el-button",{staticClass:"getCode",attrs:{type:"text"},on:{click:e.getMobileCode}},[e._v(e._s(e.codeText))])],1)],1)],1)],1):t("div",[t("span",{staticClass:"login-password-wrap"},[t("span",[e._v(e._s("authentication"==e.loginType?"密码认证":"密码登录"))])]),t("el-form",{ref:"AccountForm",staticClass:"demo-ruleForm loginform",attrs:{model:e.account,rules:e.rules,"label-position":"left","label-width":"0px"}},[t("el-form-item",{attrs:{prop:"username"}},[t("i",{staticClass:"iconfont zwpt_username"}),t("el-input",{staticClass:"input_set",attrs:{type:"text",placeholder:"请输入账号",autofocus:"","auto-complete":"off",disabled:!!e.getLoginFormShow()},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1),t("el-form-item",{attrs:{prop:"pwd"}},[t("i",{staticClass:"iconfont zwpt_password-login"}),e.getLoginFormShow()?t("el-input",{ref:"password",staticClass:"input_set",attrs:{type:e.passwordType,readonly:e.readonly,"auto-complete":"confirm-password",placeholder:"请输入登录密码"},on:{focus:function(t){return e.changAttr(t,"focus")},blur:function(t){return e.changAttr(t,"blur")},input:function(t){return e.changAttr(t,"input")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)},click:function(t){return e.clickEvt.apply(null,arguments)}},model:{value:e.account.pwd,callback:function(t){e.$set(e.account,"pwd",t)},expression:"account.pwd"}}):t("el-input",{staticClass:"input_set",attrs:{type:e.passwordType,autofocus:e.pwdFocus,"auto-complete":"off",placeholder:"请输入登录密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin.apply(null,arguments)}},model:{value:e.account.pwd,callback:function(t){e.$set(e.account,"pwd",t)},expression:"account.pwd"}}),t("i",{staticClass:"iconfont",class:e.passwordIcon,staticStyle:{cursor:"pointer"},on:{click:e.isShowPassword}})],1)],1)],1),t("div",{staticClass:"rememberpassword",attrs:{"label-width":"15px"}},[e.getLoginFormShow()?e._e():t("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")]),e.getLoginFormShow()?e._e():t("span",{staticClass:"registerbtn",on:{click:e.register}},[e._v("用户注册")])],1),t("div",{staticClass:"loginbtn",on:{click:e.handleLogin}},[t("el-button",{attrs:{type:"text",loading:e.loading}},[e._v("登录")])],1),e.tokenFail?t("span",{staticClass:"footer-text"},[e._v("重新登录后，若出现数据丢失可手动刷新页面查看")]):e._e()],1)},N=[],F=(r("d9e2"),r("14d9"),r("58e9"));function q(e){let t=new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href);return decodeURIComponent((t?t[1]:"").replace(/\+/g,"%20"))||null}function Y(e,t){var r,o=t||window.location.href;t=o.indexOf("#")>-1?null===(r=o.split("#")[1])||void 0===r?void 0:r.split("?"):o.split("?");if(t.length<=1)return"";for(var n=t[1].split("&"),a=0;a<n.length;a++){var s=n[a].split("=");if(e==s[0])return void 0!=t[2]?decodeURIComponent(s[1]+"?"+t[2]):decodeURIComponent(s[1])}}function U(){let e=window.location.href,t=window.location.hash,r=Y("source",e);return e.indexOf("/bi/")>-1||e.indexOf("/bilogin")>-1||"bi"==r||e.indexOf("/iframe/loginform")>-1||"#/login"==t}let G;try{let e=window.top.location.href;G=e.indexOf("/bi/")>0}catch(st){console.log(st)}let B=window.location.href,z=B.indexOf("/bilogin")>0;class R{static getItem(e){if(!E["b"].isLocalStorageSubGuidFilter||!G&&!z)return localStorage.getItem(e);try{let t=this.getSubGuid();t?console.log("subGuid:"+t):console.log("subGuid未获取到");let r=localStorage.getItem("appObject");if(r){let o=JSON.parse(r),n=o[t];return n[e]}}catch(t){console.log("获取"+e+"的localstorage失败"),console.error(t)}return""}static setItem(e,t){if(E["b"].isLocalStorageSubGuidFilter&&(G||z))try{let r=localStorage.getItem("appObject");if(r){let o=this.getSubGuid(),n=JSON.parse(r),a=n[o];(a instanceof String||"string"===typeof a)&&(a=JSON.parse(n[o])),a[e]=t,n[o]=a,localStorage.setItem("appObject",JSON.stringify(n))}else{let r={},o={};o[e]=t;let n=this.getSubGuid();r[n]=o,localStorage.setItem("appObject",JSON.stringify(r))}}catch(r){console.log("修改"+e+"的localstorage失败"),console.error(r)}else localStorage.setItem(e,t)}static clear(){localStorage.clear()}static removeItem(e){localStorage.removeItem(e)}static removeAppObjectItem(e){if(E["b"].isLocalStorageSubGuidFilter)try{let t=localStorage.getItem("appObject");if(t){try{t=JSON.parse(t),null!=t&&delete t[e]}catch(st){console.error(t)}localStorage.setItem("appObject",JSON.stringify(t))}}catch(t){console.log("删除"+e+"的localstorage失败"),console.error(t)}else localStorage.clear()}static getSubGuid(){try{let e=q("subGuid");if(!e){let t=window.location.href;if(window.top&&(t=window.top.location.href),t&&-1!=t.indexOf("/bi/")){let r;r=-1!=t.indexOf("?")?t.substring(t.indexOf("/bi/"),t.indexOf("?")):t.substring(t.indexOf("/bi/"));let o=localStorage.getItem("appObject");if(o){let t=JSON.parse(o);e=t[r]}}}return e}catch(e){console.error(e)}return null}static getHrefQueryData(){let e=window.location.href,t=q("token");if(""!==t&&null!==t){let o=t.toLowerCase();if(e.indexOf("/bi/")>=0||e.indexOf("/bilogin")>=0){o.startsWith("bearer")?this.setItem("X-Gisq-Token",t):this.setItem("X-Gisq-Token","Bearer "+t),this.setItem("loginflag","true");let e=r("27ae").Base64,n=t.split(".");if(n.length>1){let r=e.decode(t.split(".")[1]),o=JSON.parse(r).user_name;this.setItem("username",o);let n=JSON.parse(r).user_id;this.setItem("userId",n)}}else{o.startsWith("bearer")?window.localStorage.setItem("X-Gisq-Token",t):window.localStorage.setItem("X-Gisq-Token","Bearer "+t),window.localStorage.setItem("loginflag","true");let e=r("27ae").Base64,n=t.split(".");if(n.length>1){let r=e.decode(t.split(".")[1]),o=JSON.parse(r).user_name;window.localStorage.setItem("username",o);let n=JSON.parse(r).user_id;window.localStorage.setItem("userId",n)}}}}}const H="undefined"!=localStorage.ip?localStorage.ip:"";class ${static async login(e,t,r){let o={};if(1==E["a"].innerCode){let r={"x-gisq-deviceId":E["a"].diviceId};const a=await D()({method:"get",url:E["a"].auth+"/auth/code/imagestr",params:r}),s={username:e,password:t,"x-gisq-deviceId":E["a"].diviceId,imageCode:a.data.imageCode};var n="";n=F["a"].encrypt(JSON.stringify(s));let i={encryptuserinfo:n,useValidateCode:"false",ip:H};o=await D()({method:"post",url:E["a"].auth+"/auth/oauth/login",params:i})}else o=await D()({method:"post",url:E["a"].auth+"/auth/oauth/login",params:J(e,t)});const{data:a}=o;let s=a.access_token,i=new Date;i.setTime(i.getTime()+216e5),a.systemUser=a.system_user;const l=decodeURIComponent(a.user_nickname),c=decodeURIComponent(a.user_name);return r?(R.setItem("X-Gisq-Token","Bearer "+s),R.setItem("accessToken",s)):(localStorage.setItem("userNickname",l),localStorage.setItem("username",c),localStorage.setItem("beforeTelephoneTm",a.user_tel),localStorage.setItem("userId",a.user_id),localStorage.setItem("loginflag","true"),localStorage.setItem("X-Gisq-Token","Bearer "+s),localStorage.setItem("tempToken",a.tempToken),localStorage.setItem("gisqPublic",a.gisqPublic),localStorage.setItem("accessToken",s),localStorage.setItem("initPasswordModifyFlag",a.initPasswordModifyFlag),localStorage.setItem("initPasswordModifyCause",a.initPasswordModifyCause),localStorage.setItem("tokenFail","false"),localStorage.setItem("userinfo",JSON.stringify(a)),localStorage.setItem("tokenLost","false"),sessionStorage.setItem("loginStatus","true")),document.cookie="X-Gisq-Token=Bearer "+s+";path=/;expires="+i.toUTCString(),a}static async zzdLogin(e,t){const r=await D.a.get(this.zzdLoginApi+e+"&zzdAppCode="+t);return r.data}static async refreshToken(e){const{data:t}=await D()({method:"post",url:this.refreshTokenUrl.replace("{token}",e)});let r=t.access_token,o=new Date;return o.setTime(o.getTime()+216e5),localStorage.setItem("username",t.user_name),localStorage.setItem("loginflag","true"),localStorage.setItem("X-Gisq-Token","Bearer "+r),localStorage.setItem("accessToken",r),document.cookie="X-Gisq-Token=Bearer "+r+";path=/;expires="+o.toUTCString(),t}static async removeToken(){await D()({method:"post",url:this.removeTokenUrl})}static async sendMobileCode(e){const t=await D.a.post(this.sendMobileCodeUrl,e);return t.data.data}static async phonecodeLogin(e,t){const r=await D.a.post(this.phonecodeUrl+"?mobileCode="+e.mobileCode+"&mobile="+e.mobile),o=r.data.data;let n=o.access_token,a=new Date;a.setTime(a.getTime()+216e5);const s=decodeURIComponent(o.user_nickname),i=decodeURIComponent(o.user_name);return t?(R.setItem("X-Gisq-Token","Bearer "+n),R.setItem("accessToken",n)):(localStorage.setItem("userNickname",s),localStorage.setItem("username",i),localStorage.setItem("beforeTelephoneTm",o.user_tel),localStorage.setItem("userId",o.user_id),localStorage.setItem("loginflag","true"),localStorage.setItem("X-Gisq-Token","Bearer "+n),localStorage.setItem("accessToken",n),localStorage.setItem("tempToken",o.tempToken),localStorage.setItem("gisqPublic",o.gisqPublic),localStorage.setItem("tokenFail","false"),localStorage.setItem("userinfo",JSON.stringify(o)),localStorage.setItem("initPasswordModifyFlag",o.initPasswordModifyFlag),localStorage.setItem("initPasswordModifyCause",o.initPasswordModifyCause)),document.cookie="X-Gisq-Token=Bearer "+n+";path=/;expires="+a.toUTCString(),r.data.data}}function J(e,t){var r=F["a"].encrypt(JSON.stringify({username:e,password:t}));let o={encryptuserinfo:r,useValidateCode:"false",ip:H};return o}$.loginApi=E["a"].auth+"/auth/oauth/login",$.zzdLoginApi=E["a"].auth+"/auth/auu/authCode?type=token&authCode=",$.refreshTokenUrl=E["a"].auth+"auth/oauth/token?refreshToken={token}",$.removeTokenUrl=E["a"].auth+"auth/removeToken",$.sendMobileCodeUrl=E["a"].base+"base/shortmsg/sendMobileCode",$.phonecodeUrl=E["a"].auth+"/auth/auu/phonecode";class K{static async pwdCheck(){const e=await D.a.get(this.getpwdCheckUrl);return e.data.data}}K.getpwdCheckUrl=(E["b"].isNew?E["b"].identity:E["b"].platform)+"base/passWordCheck";var W=r("60a3"),X=r("4756"),V=r("5808"),Q=r.n(V);const Z=new o["default"];function ee(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var o=e.join("");return o}function te(e){var t=new Date;return t.pattern(e||"yyyy-MM-dd hh:mm:ss")}function re(e,t){if(null==e||""==e)return"";var r=new Date(e);return r.pattern(t||"yyyy-MM-dd HH:mm:ss")}function oe(e){if(!e)return"";let t=e.split("/"),r=Q.a.find(globalJS.cycleDays,e=>e.value==t[0]);if(r&&r.children&&r.children.length>0){let e=Q.a.find(r.children,e=>e.value==t[1]);if(e&&e.children&&e.children.length>0){let o=Q.a.find(e.children,e=>e.value==t[2]);return o?r.label+"/"+e.label+"/"+o.label:""}return r.label+"/"+e.label}return r?r.label:""}function ne(e,t,r){Z.$notify({title:e,message:r,type:t})}function ae(){return{background:"#FAFAFA",height:"37px"}}function se(){return{height:"37px"}}function ie(){return"PlatForm"+Math.random().toString().substr(3,2)+le()+le()}function le(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function ce(e){if("string"===typeof e)try{let t=JSON.parse(e);return!("object"!==typeof t||!t)}catch(st){return!1}}Date.prototype.toMSJSON=function(){var e="/Date("+this.getTime()+")/";return e},Date.prototype.pattern=function(e){if(void 0==e)return"";var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()/12>1?12+(this.getHours()%12==0?12:this.getHours()%12):this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},r={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,String(this.getFullYear()).substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+r[String(this.getDay())])),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr(String(t[o]).length)));return e};var ue={newGuid:ee,nowDate:te,dateTimeFormatter:re,getCycleDaysName:oe,messageAlert:ne,tableHeadStyle:ae,tableRowStyle:se,getCode:ie,isJSON:ce},de=r("38d6"),fe=r("c1df"),pe=r.n(fe),me={getToday(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().startOf("day").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getRecentTime(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().valueOf()-432e5).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getYesterday(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().add(-1,"days").startOf("day").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().add(-1,"days").endOf("day").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getCurrWeekDays(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().week(pe()().week()).startOf("week").add(1,"days").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().week(pe()().week()).endOf("week").add(1,"days").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getLastWeekDays(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().week(pe()().week()-1).startOf("week").add(1,"days").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().week(pe()().week()-1).endOf("week").add(1,"days").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getCurrMonthDays(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().month(pe()().month()).startOf("month").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().month(pe()().month()).endOf("month").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getLastMonthDays(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().month(pe()().month()-1).startOf("month").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().month(pe()().month()-1).endOf("month").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getLastThreeMonthDays(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().month(pe()().month()-3).valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().month(pe()().month()-3).endOf("month").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getCurrYearDays(){let e={starttime:"",endtime:""};return e.starttime=pe()(pe()().year(pe()().year()).startOf("year").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e.endtime=pe()(pe()().year(pe()().year()).endOf("year").valueOf()).format("YYYY-MM-DD HH:mm:ss"),e},getCurrTime(){let e=pe()(pe()().valueOf()).format("YYYY-MM-DD HH:mm:ss");return e}};let ge=class extends o["default"]{constructor(){super(...arguments),this.loading=!1,this.account={username:"",pwd:""},this.pwdFocus=!1,this.checked=!1,this.rules={username:[{required:!0,message:"账号不能为空",trigger:"change"}],pwd:[{required:!0,message:"登录密码不能为空",trigger:"change"}]},this.passwordType="",this.passwordIcon="zwpt_viewHide",this.activeName="password",this.codeLogin={mobile:"",mobileTm:"",mobileCode:""},this.codeRules={mobile:[{validator:(e,t,r)=>{let o=/^0?(13[0-9]|14[01456879]|15[0-3,5-9]|16[2567]|17[0-8]|18[0-9]|19[0-3,5-9])[0-9]{8}$/;if(""==t||void 0==t)r(new Error("手机号不能为空"));else{if(o.test(t))return r();r(new Error("手机号码格式不正确"))}},required:!0,trigger:"change"}],mobileCode:[{required:!0,message:"短信验证码不能为空",trigger:"change"}]},this.codeText="获取验证码",this.codeTime=0,this.showCodeLogin=!1,this.readonly=!1}async clickChange(){let e=["SMSVerificationCodeLogin"],t={subGuid:this.subGuid,propertyKeys:e};const r=await P.getCodeValuePropertysByKeys(t);if(r.length>0){const e=r.filter(e=>"SMSVerificationCodeLogin"==e.key);this.showCodeLogin=e.length>0&&"1"==e[0].value}}getLoginFormShow(){return!(!this.tokenFail&&"authentication"!=this.loginType)}created(){this.clickChange(),this.getLoginFormShow();var e=window.localStorage.getItem("rememberPassword");let t=r("27ae").Base64;if("true"==e&&(this.checked=!0,this.account.username=localStorage.username,this.getLoginFormShow()||(this.account.pwd=t.decode(localStorage.password))),console.log(this.tokenFail,this.subGuid,this.loginType),this.getLoginFormShow())if(this.subGuid){let e=this.getAppObjectKeyValue(this.subGuid,"userinfo");e=ue.isJSON(e)?JSON.parse(e):e,this.account.username=decodeURIComponent(this.isEmpty(e)?localStorage.user_name:e.user_name);const t=this.getAppObjectKeyValue(this.subGuid,"beforeTelephone"),r=this.getAppObjectKeyValue(this.subGuid,"beforeTelephoneTm");this.codeLogin.mobile=t||"",this.codeLogin.mobileTm=r||""}else this.account.username=localStorage.username,this.codeLogin.mobile=localStorage.beforeTelephone,this.codeLogin.mobileTm=localStorage.beforeTelephoneTm;this.passwordType=this.getLoginFormShow()?"text":"password"}changAttr(e,t){"focus"===t?(e&&(e.stopPropagation(),e.preventDefault()),setTimeout(()=>{this.readonly=!1},100)):"blur"===t?(e&&e.stopPropagation(),this.readonly=!0):e?"zwpt_viewHide"==this.passwordIcon&&(this.passwordType="password"):(this.readonly=!0,this.passwordType="text")}clickEvt(){this.$refs.password&&(this.$refs.password.$refs.input.onmousedown=e=>(e&&(e.preventDefault(),e.stopPropagation()),(""===this.account.pwd||this.readonly)&&(this.$refs.password.$refs.input.blur(),setTimeout(()=>{this.$refs.password.$refs.input.focus()},0),"zwpt_viewHide"==this.passwordIcon&&(this.passwordType="password")),!1))}isShowPassword(){"password"==this.passwordType?(this.passwordType="text",this.passwordIcon="zwpt_viewShow"):(this.passwordType="password",this.passwordIcon="zwpt_viewHide")}async register(){this.$router.push({path:"/register"})}getMobile(e){this.codeLogin.mobile=e}async handleLogin(){"password"!=this.activeName&&this.showCodeLogin?this.$refs.codeForm.validate(async e=>{if(e){let e={mobileCode:this.codeLogin.mobileCode,mobile:this.codeLogin.mobile,checked:this.checked};this.loading=!0;try{setTimeout(()=>{this.loading=!1},1e3);const t=await $.phonecodeLogin(e,this.subGuid);await this.handelLoginSuccess(t)}catch(st){this.loading=!1}}}):this.$refs.AccountForm.validate(async e=>{if(e){let e={username:this.account.username,password:this.account.pwd,checked:this.checked};this.loading=!0;try{setTimeout(()=>{this.loading=!1},1e3);const t=await $.login(e.username,e.password,this.subGuid);await this.handelLoginSuccess(t)}catch(st){console.log(st),this.loading=!1}}})}async getMobileCode(){this.codeTime>0||this.$refs.codeForm.validateField(["mobile"],async e=>{if(e)console.log(e);else{const e={subGuid:"",telephone:this.codeLogin.mobile};await $.sendMobileCode(e);this.openTimer()}})}async getPlatInfo(){const e=await P.getPlatInfo();localStorage.setItem("deptName",e.deptName),localStorage.setItem("staffName",e.staffName),localStorage.setItem("userId",e.userId),localStorage.setItem("deptId",e.deptId),localStorage.setItem("xzqdm",e.xzqdm),localStorage.setItem("roles",e.roles),localStorage.setItem("modulus",e.modulus),localStorage.setItem("exponent",e.exponent),localStorage.setItem("systemUser",e.systemUser),localStorage.setItem("lockScreen",e.lockScreen),localStorage.setItem("waterMark",e.waterMark),localStorage.setItem("ip",e.ip),localStorage.setItem("roleCodes",e.roleCodes),localStorage.setItem("pullData",null===e||void 0===e?void 0:e.pullData),this.$emit("changeStarfName",e.staffName),localStorage.setItem("platformExplorerDiagramUrl",e.platformExplorerDiagramUrl)}openTimer(){this.codeTime=60,this.handleTimer()}handleTimer(){this.codeTime>0?(this.codeTime--,setTimeout(this.handleTimer,1e3)):this.codeTime=0,this.codeText=this.codeTime>0?this.codeTime+"s后重新获取":"获取验证码"}async handelLoginSuccess(e){if(this.getLoginFormShow()){if(this.subGuid){X["a"].$emit("showBiLoginpageUrl",{isDialog:!1,subGuid:this.subGuid});const t=this.subGuid;let r=localStorage.getItem("appObject");if(r){let o=JSON.parse(r),n=o[t];(n instanceof String||"string"===typeof n)&&(n=JSON.parse(o[t])),n["userinfo"]=e,n["tokenLost"]=!1,o[t]=n,localStorage.setItem("appObject",JSON.stringify(o))}const o=localStorage.getItem("X-Gisq-Token"),n=R.getItem("X-Gisq-Token");o===n&&localStorage.setItem("tokenLost","false")}else this.initSoket(),localStorage.setItem("tokenLost","false"),this.setAppObjectTokenLost();this.$emit("closeLoginForm")}else{var t,r,o,n;await this.getPlatInfo();let e=await K.pwdCheck(),a=null===(t=this.account.pwd)||void 0===t?void 0:t.match(e.rev);null==a?localStorage.setItem("pflag",!1+"♀"+e.key+"♀"+e.rev):localStorage.setItem("pflag",!0+"♀"+e.key+"♀"+e.rev),null===(r=window)||void 0===r||null===(o=r.location)||void 0===o||null===(n=o.reload)||void 0===n||n.call(o),this.initSoket(),await this.addWaterMarkService()}}handleClick(){this.getLoginFormShow()&&"code"==this.activeName&&!this.codeLogin.mobileTm&&this.$message({message:"用户"+this.account.username+"未绑定手机号",type:"warning"})}getOpener(e){if(e){e.postMessage({type:"toBackHome"},"*");let t=e.opener;t&&this.getOpener(t)}}initSoket(){const e={username:localStorage.getItem("username"),logintype:"PC",key:"mac",staffName:localStorage.getItem("staffName"),devicetype:"",reload:window.name,userId:localStorage.getItem("userId"),linkType:"login",accessToken:localStorage.getItem("accessToken"),preview:!0,requestUrl:"/projectHome"};this.websoket=de["a"].initWebsoket(e)}addWaterMarkService(){const e=localStorage.userNickname;let t=localStorage.waterMark;const r=q("from");if(e&&""!=t&&"true"!=t&&null!=t&&"link"!=r){let e=me.getCurrTime(),r=/[\d]{4}[\/-]{1}[\d]{1,2}[\/-]{1}[\d]{1,2}\s[\d]{1,2}[:][\d]{1,2}[:][\d]{1,2}/g;t=JSON.parse(JSON.stringify(t).replace(r,e)),setTimeout(()=>{M.create(t,!0)},100)}}getAppObjectKeyValue(e,t){let r=localStorage.getItem("appObject");if(r){let o=JSON.parse(r),n=o[e];if((n instanceof String||"string"===typeof n)&&(n=JSON.parse(o[e])),t)return n[t]}}setAppObjectTokenLost(){try{const e=localStorage.getItem("X-Gisq-Token");let t=localStorage.getItem("appObject");if(t){let r=JSON.parse(t);for(let t in r){let o=r[t]["X-Gisq-Token"]===e;o&&(r[t].tokenLost=!1)}localStorage.setItem("appObject",JSON.stringify(r))}}catch(e){console.log("修改appObject的tokenLost失败")}}isEmpty(e){return!e||"undefined"==typeof e||0==e}};Object(m["a"])([Object(W["a"])()],ge.prototype,"tokenFail",void 0),Object(m["a"])([Object(W["a"])()],ge.prototype,"subGuid",void 0),Object(m["a"])([Object(W["a"])()],ge.prototype,"beforeUserId",void 0),Object(m["a"])([Object(W["a"])()],ge.prototype,"loginType",void 0),ge=Object(m["a"])([Object(g["b"])({})],ge);var he=ge,be=he,we=(r("a6cf"),Object(c["a"])(be,A,N,!1,null,null,null)),ye=we.exports;let ve=class extends o["default"]{constructor(){super(...arguments),this.platformTitle="",this.logoUrl="",this.flag=!1}created(){X["a"].$emit("showLoginForm",{isDialog:!1}),this.clickChange(),M.remove()}mounted(){const e=localStorage.rememberPassword;if("true"==e){const e=["rememberPassword","username","password","appObject"];for(let t in localStorage)-1==e.indexOf(t)&&localStorage.removeItem(t)}else{const e=["appObject"];for(let t in localStorage)-1==e.indexOf(t)&&localStorage.removeItem(t)}setTimeout(()=>{this.flag=!0,localStorage.removeItem("tokenLost"),localStorage.removeItem("tokenFail"),console.log(localStorage)},500)}async clickChange(){let e=["platformDesignerTitle","platformDesignerLogo"],t={subGuid:"",propertyKeys:e};const o=await P.getCodeValuePropertysByKeys(t);if(o.length>0){const e=o.filter(e=>"platformDesignerTitle"==e.key);this.platformTitle=e.length>0?e[0].value:this.MICRO_CONFIG.title;const t=o.filter(e=>"platformDesignerLogo"==e.key);t.length>0&&"image"!==t[0].value?this.logoUrl=t[0].value:this.logoUrl=this.logoUrl,this.logoUrl=t.length>0&&"image"!==t[0].value?t[0].value:r("e2a7"),this.changeFavicon(this.logoUrl)}}async changeFavicon(e){document.title=this.platformTitle?this.platformTitle:"登录";const t=e;let r=document.querySelector('link[rel="icon"]');if(null!==r)r.href=t;else{let e=document.createElement("link");e.rel="icon",e.href=t,document.head.appendChild(e)}}};ve=Object(m["a"])([Object(g["b"])({components:{loginForm:ye}})],ve);var _e=ve,ke=_e,Se=(r("8d63"),Object(c["a"])(ke,f,p,!1,null,null,null)),je=Se.exports;o["default"].use(n["a"]);const Oe=[{path:"/",name:"Login",component:je}];var Ie=Oe,xe=(r("13d5"),r("2f62"));const Te={msg:e=>e.appstore.msg};var Ce=Te;o["default"].use(xe["a"]);const Me=r("c653"),Le=Me.keys().reduce((e,t)=>{const r=t.replace(/^\.\/(.*)\.\w+$/,"$1"),o=Me(t);return e[r]=o.default,e},{}),De=new xe["a"].Store({modules:Le,getters:Ce});var Ee=De;const Pe={},Ae=e=>{var t,r;null===e||void 0===e||null===(t=e.onGlobalStateChange)||void 0===t||t.call(e,(t,r)=>{console.log(`[onGlobalStateChange - ${e.name}]:`,t,r),Ee.dispatch("appstore/setMsg",t.msg)},!0),null===e||void 0===e||null===(r=e.setGlobalState)||void 0===r||r.call(e,{ignore:e.name,msg:`来自${e.name}动态设定的消息`}),Pe.setGlobalState=null===e||void 0===e?void 0:e.setGlobalState,Pe.name=e.name};var Ne=Ae;const Fe=window.__POWERED_BY_QIANKUN__;let qe=null,Ye=null;const Ue=()=>({async bootstrap(){},async mount(e){Ne(e),Ge(e)},async unmount(){var e,t;null===(e=(t=Ye).$destroy)||void 0===e||e.call(t),Ye=null,qe=null},async update(e){console.log("update props",e)}});console.log(Ie);const Ge=({routerBase:e,container:t}={})=>{o["default"].config.productionTip=!1,qe=new n["a"]({base:Fe?e:"/",mode:"history",routes:Ie}),Ye=new o["default"]({router:qe,render:e=>e(d)}).$mount(t?t.querySelector("#app"):"#app")};var Be,ze=r("5c96"),Re=r.n(ze);(function(e){e["success"]="200",e["noAuth"]="401",e["error"]="900",e["errorBeforeRequest"]="errorBeforeRequest"})(Be||(Be={}));class He extends Error{constructor(e,t=""){super(t||He.getMessageByCode(e)),this.code=e}static getMessageByCode(e){switch(e){case Be.noAuth:return"认证失败，请联系管理员";case Be.error:return"业务错误，禁止进行操作";case Be.errorBeforeRequest:return"请求之前网页发生错误，请求无法继续进行"}}}var $e,Je=r("9816");function Ke(e){if(e&&200!=e.status){if(401!=e.status)return Promise.reject(e.data);if(Ze(),document.title=E["b"].title,window.parent!=window)return}}function We(e){if("200"!=e.data.status&&"500"!=e.data.status)throw Object(ze["Message"])({message:e.data.msg,type:"error",duration:3e3}),Error(e.data.msg);return e}function Xe(e){const t=["biz/definition/importModels"];let r=t.some((function(t){return e.url.indexOf(t)>-1}));r&&($e=ze["Loading"].service({lock:!0,text:"数据处理中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}))}function Ve(e){const t=q("subGuid");let r;r=t||window.localStorage.getItem("subGuid");const o=["auth/oauth/login"];let n=o.some((function(t){return(null===e||void 0===e?void 0:e.url.indexOf(t))>-1}));if(r&&!n){Y("subGuid",e.url)||(e["params"]?e.params["subGuid"]=r:e["params"]={subGuid:r});const t=localStorage.appNameArr?JSON.parse(localStorage.appNameArr):JSON.parse("[]");if(t){const o=t.findIndex(e=>e.key==r);t[o]&&t[o].name&&(e["params"]?e.params["subSystemName"]=t[o].name:e["params"]={subSystemName:t[o].name})}}}function Qe(e){const t=["logmgr/getSecureAuditLog"];let r=t.some((function(t){return(null===e||void 0===e?void 0:e.url.indexOf(t))>-1}));r||(e["params"]?e.params["preview"]=!0:e["params"]={preview:!0})}function Ze(){if(U()){const e=localStorage.getItem("X-Gisq-Token"),t=R.getItem("X-Gisq-Token");R.setItem("tokenLost",!0),e===t&&localStorage.setItem("tokenLost","true")}else{const e=localStorage.getItem("X-Gisq-Token");e?(localStorage.setItem("tokenLost","true"),X["a"].$emit("showLoginForm",{isDialog:!0}),et()):window.location.href=E["b"].routePath+"/#/login"}}function et(){try{const e=localStorage.getItem("X-Gisq-Token");let t=localStorage.getItem("appObject");if(t){let r=JSON.parse(t);for(let t in r){let o=r[t]["X-Gisq-Token"]===e;o&&(r[t].tokenLost=!0)}localStorage.setItem("appObject",JSON.stringify(r))}}catch(e){console.log("修改appObject的tokenLost失败")}}D.a.defaults.withCredentials=!0,D.a.interceptors.request.use(e=>{Qe(e),Ve(e),Xe(e);let t;q("token");if(E["b"].timestampToken){let e=Date.now();const r="GisqSecurity_"+ue.newGuid()+"_"+e;let o=window.localStorage.getItem("gisqPublic"),n={},a=new Je["a"](n);a.setPublicKey(o),t=a.encrypt(r)}let r=window.localStorage.getItem("X-Gisq-Token");return U()&&(r=R.getItem("X-Gisq-Token")),E["b"].timestampToken?e.headers["X-Gisq-Token"]=r+"."+t:e.headers["X-Gisq-Token"]=r,e.cancelToken=new D.a.CancelToken((function(e){Ee.commit("pushToken",{cancelToken:e})})),e},e=>Promise.reject(e)),D.a.interceptors.response.use(e=>{var t;if(702===e.data.code?(localStorage.removeItem("access-user"),window.location.href=E["b"].routePath+"/#/login"):e.data.user&&localStorage.setItem("access-user",e.data.user),e){var r,o,n;if(e.request.responseURL.indexOf("gisqForm")>=0)return e.request.responseURL.indexOf("checkImportFormExist")>=0||e.request.responseURL.indexOf("exportForm")>=0||(e.data&&e.data.status&&e.data.code&&200!=e.data.status&&200!=e.data.code&&(null===(o=$e)||void 0===o||o.close(),Object(ze["Message"])({message:e.data.msg?e.data.msg:"请求失败",type:"error",duration:3e3})),null===(r=$e)||void 0===r||r.close()),e;if(e.data instanceof Blob){var a,s;if(200!=e.status)throw null===(s=$e)||void 0===s||s.close(),Object(ze["Message"])({message:"获取文件失败",type:"error",duration:3e3}),new He(Be.error,"获取文件失败");return null===(a=$e)||void 0===a||a.close(),e}if(e.data&&e.data.status&&200!=e.data.status&&200!=e.data.code){var i,l,c,u;if(e.request.responseURL.indexOf("gisqBI")>=0)e.data.msg="BI服务："+e.data.msg,null===(c=$e)||void 0===c||c.close();if(null===(i=$e)||void 0===i||i.close(),900==(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.status))"无权限操作！"==(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.msg)&&(localStorage.clear(),window.location.href=E["b"].routePath+"/#/login"),Object(ze["Message"])({message:e.data.msg?e.data.msg:"请求失败",type:"warning",duration:3e3});else Object(ze["Message"])({message:e.data.msg?e.data.msg:"请求失败",type:"error",duration:3e3});if(e.data.msg)throw new He(e.data.status,e.data.msg)}return null===(n=$e)||void 0===n||n.close(),e}return null===(t=$e)||void 0===t||t.close(),We(e),e},e=>{if(D.a.isCancel(e))return new Promise(()=>{});{var t;null===(t=$e)||void 0===t||t.close();const r=e.response;Ke(r)}});var tt=D.a;r("34c4"),r("863e");o["default"].use(Re.a),o["default"].prototype.$axios=tt;const{bootstrap:rt,mount:ot,unmount:nt}=Ue(),at=window.__POWERED_BY_QIANKUN__;at||Ge()},e2a7:function(e,t,r){e.exports=r.p+"static/img/ztgx_logo.f10f4355.svg"},e34b:function(e,t,r){e.exports=r.p+"static/media/loginmp4.af60e720.mp4"},f80a:function(e,t,r){"use strict";r("4824")}})}));
//# sourceMappingURL=app.3ea235fe.js.map